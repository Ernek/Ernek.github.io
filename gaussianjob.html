
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ernek.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://ernek.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://ernek.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ernek.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ernek.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ernek.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ernesto's Blog Atom">





<meta name="author" content="Ernek" />
<meta name="description" content="How to run a job with Gaussian on Kamiak HPC cluster at WSU. Submission script, input and output files." />
<meta name="keywords" content="gaussian, kamiak, wsu, misc">

<meta property="og:site_name" content="Ernesto's Blog"/>
<meta property="og:title" content="Running a calculation with Gaussian"/>
<meta property="og:description" content="How to run a job with Gaussian on Kamiak HPC cluster at WSU. Submission script, input and output files."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ernek.github.io/gaussianjob.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-06-03 23:00:00-07:00"/>
<meta property="article:modified_time" content="2019-06-03 23:20:00-07:00"/>
<meta property="article:author" content="https://ernek.github.io/author/ernek.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="gaussian"/>
<meta property="article:tag" content="kamiak"/>
<meta property="article:tag" content="wsu"/>
<meta property="article:tag" content="misc"/>
<meta property="og:image" content="/images/avatar02.jpg">

  <title>Ernesto's Blog &ndash; Running a calculation with Gaussian</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ernek.github.io">
        <img src="/images/avatar02.jpg" alt="Ernesto's Blog" title="Ernesto's Blog">
      </a>
      <h1><a href="https://ernek.github.io">Ernesto's Blog</a></h1>

<p>Theoretical and Computational Chemistry</p>
      <nav>
        <ul class="list">

          <li><a href="http://python.org/" target="_blank">Python.org</a></li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-twitter" href="https://twitter.com/ErnestoCheco" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/Ernek" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://ernek.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ernek.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="gaussianjob">Running a calculation with Gaussian</h1>
    <p>
          Posted on Mon 03 June 2019 in <a href="https://ernek.github.io/category/misc.html">misc</a>


    </p>
  </header>


  <div>
    <p>In this post I will present essential steps needed to sucessfully run your first Gaussian calculations.
We will run Gaussian on the WSU HPC cluster <strong>Kamiak</strong> where Gaussian09 is already installed and available to licensed users.</p>
<h2>Input File</h2>
<p>All directives of your job as well as the system's molecular geometry should be contained in the <strong>input</strong> file. Here is an example of a <strong>HF single point energy calculation</strong>:</p>
<div class="highlight"><pre><span></span>%chk<span class="o">=</span>test_run                    ! Checkpoint file needed to save info needed to restart job    
<span class="c1">#P hf/cc-pVDZ                    ! Job directives . Hartree Fock single point calc with cc-pVDZ basis sets</span>
                                 ! Empty line ... This empty line is needed
job name                         ! Job name descriptor
                                 ! Empty line ... This empty line is needed
-1 <span class="m">1</span>                             ! Charge Spin
Al <span class="m">4</span>.158934 <span class="m">12</span>.319204 <span class="m">8</span>.139289   ! Atomic-symbol x-coord y-coord z-coord
O <span class="m">5</span>.204656 <span class="m">12</span>.33906 <span class="m">6</span>.772874
H <span class="m">5</span>.524529 <span class="m">11</span>.426276 <span class="m">6</span>.453445
O <span class="m">4</span>.893735 <span class="m">13</span>.419199 <span class="m">9</span>.302062
H <span class="m">5</span>.82317 <span class="m">13</span>.510635 <span class="m">9</span>.461939
O <span class="m">2</span>.621193 <span class="m">13</span>.123312 <span class="m">7</span>.624101
H <span class="m">2</span>.124667 <span class="m">13</span>.404712 <span class="m">8</span>.410292
O <span class="m">3</span>.723529 <span class="m">10</span>.689556 <span class="m">8</span>.948275
H <span class="m">3</span>.223616 <span class="m">10</span>.091097 <span class="m">8</span>.387248
                                 ! Empty line ... This empty line is needed                   
</pre></div>


<p>With this simple input file (let's save it and name it: "gaussian_test.com"), the only other thing we need in order to run our first Gaussian calculation on the <strong>Kamiak</strong> cluster is a submission script to launch our calculation on <strong>Kamiak</strong> nodes.</p>
<h2>Submission Script for Gaussian on Kamiak</h2>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --job-name=test       ###Job Name</span>
<span class="c1">#SBATCH --partition=kamiak    ###Partition on which to run</span>
<span class="c1">#SBATCH --nodes=1             ###Number of nodes to use</span>
<span class="c1">#SBATCH --ntasks-per-node=20   ###Number of tasks per node (aka MPI processes)</span>
<span class="c1">#SBATCH --cpus-per-task=1    ###Number of cpus per task (aka OpenMP threads)</span>
<span class="c1">#SBATCH --time=7-00:00:00</span>
module load gaussian          <span class="c1">###Load gaussian module on Kamiak</span>

<span class="nv">finit</span><span class="o">=</span><span class="nv">$1</span>                      <span class="c1">###The base name of your input file  </span>
<span class="nv">fend</span><span class="o">=</span><span class="s1">&#39;.com&#39;</span>                     
<span class="nv">foutend</span><span class="o">=</span><span class="s1">&#39;.out&#39;</span>

<span class="nb">export</span> <span class="nv">GAUSS_SCRDIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>mkworkspace -q<span class="k">)</span><span class="s2">&quot;</span>  <span class="c1">###Creates a workspace</span>

g09 &lt; <span class="si">${</span><span class="nv">finit</span><span class="si">}${</span><span class="nv">fend</span><span class="si">}</span> &gt; <span class="si">${</span><span class="nv">finit</span><span class="si">}${</span><span class="nv">foutend</span><span class="si">}</span>                                                        
</pre></div>


<p>Let's save this piece of bash code and save it as: "sub_g09.slurm". Since our input file name is "gaussian_test.com" to run <strong>Gaussian</strong> with this submission script we would type:</p>
<div class="highlight"><pre><span></span>sbatch sub_g09.slurm gaussian_test     <span class="c1">### &quot;gaussian_test&quot; is the base name of our input file  </span>
</pre></div>


<p>Running this job should generate an output-file named "gaussian_test.out" that will contain all the info of this calculation.
Let's look at some of its elements before we explain one example with a bit more complicated workflow.</p>
<h2>Output File</h2>
<p>After the job has run to completion you can check the "gaussian_test.out" output-file located in the folder where you launched your calculation from. You can check the <strong>"Normal termination of Gaussian..."</strong> sentence at the end of the output file.<br>
The HF Energy after several SCF cycles can normally be found by searching for <strong>"SCF Done:  E(RHF)"</strong>:</p>
<div class="highlight"><pre><span></span>grep -H <span class="s1">&#39;SCF Done:  E(RHF)&#39;</span> gaussian_test.out
</pre></div>


<p>There are many other interesting properties you will find in the output file i.e Atomic Mulliken partial charges, info about dipole moments etc...</p>
<p>For more info about <strong>input</strong> options or general examples for each type of calculation you can check Gaussian's website directly <a href="http://gaussian.com/keywords/">here</a> : <code>http://gaussian.com/keywords/</code>.</p>
<p>Files related to this simple Gaussian calculation can be found <a href="https://github.com/Ernek/NMR/tree/master/hf-run">here</a>. (note: no output file provided)</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ernek.github.io/tag/gaussian.html">gaussian</a>
      <a href="https://ernek.github.io/tag/kamiak.html">kamiak</a>
      <a href="https://ernek.github.io/tag/wsu.html">wsu</a>
      <a href="https://ernek.github.io/tag/misc.html">misc</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Ernesto's Blog ",
  "url" : "https://ernek.github.io",
  "image": "/images/avatar02.jpg",
  "description": "A place to save my learning journey"
}
</script>

</body>
</html>