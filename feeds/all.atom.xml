<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Ernesto's Blog</title><link href="https://ernek.github.io/" rel="alternate"></link><link href="https://ernek.github.io/feeds/all.atom.xml" rel="self"></link><id>https://ernek.github.io/</id><updated>2019-06-03T23:20:00-07:00</updated><subtitle>Theoretical and Computational Chemistry</subtitle><entry><title>Running a calculation with Gaussian</title><link href="https://ernek.github.io/gaussianjob.html" rel="alternate"></link><published>2019-06-03T23:00:00-07:00</published><updated>2019-06-03T23:20:00-07:00</updated><author><name>Ernek</name></author><id>tag:ernek.github.io,2019-06-03:/gaussianjob.html</id><summary type="html">&lt;p&gt;How to run a job with Gaussian on Kamiak HPC cluster at WSU. Submission script, input and output files.&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this post I will present essential steps needed to sucessfully run your first Gaussian calculations.
We will run Gaussian on the WSU HPC cluster &lt;strong&gt;Kamiak&lt;/strong&gt; where Gaussian09 is already installed and available to licensed users.&lt;/p&gt;
&lt;h2&gt;Input File&lt;/h2&gt;
&lt;p&gt;All directives of your job as well as the system's molecular geometry should be contained in the &lt;strong&gt;input&lt;/strong&gt; file. Here is an example of a &lt;strong&gt;HF single point energy calculation&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;%chk&lt;span class="o"&gt;=&lt;/span&gt;test_run                    ! Checkpoint file needed to save info needed to restart job    
&lt;span class="c1"&gt;#P hf/cc-pVDZ                    ! Job directives . Hartree Fock single point calc with cc-pVDZ basis sets&lt;/span&gt;
                                 ! Empty line ... This empty line is needed
job name                         ! Job name descriptor
                                 ! Empty line ... This empty line is needed
-1 &lt;span class="m"&gt;1&lt;/span&gt;                             ! Charge Spin
Al &lt;span class="m"&gt;4&lt;/span&gt;.158934 &lt;span class="m"&gt;12&lt;/span&gt;.319204 &lt;span class="m"&gt;8&lt;/span&gt;.139289   ! Atomic-symbol x-coord y-coord z-coord
O &lt;span class="m"&gt;5&lt;/span&gt;.204656 &lt;span class="m"&gt;12&lt;/span&gt;.33906 &lt;span class="m"&gt;6&lt;/span&gt;.772874
H &lt;span class="m"&gt;5&lt;/span&gt;.524529 &lt;span class="m"&gt;11&lt;/span&gt;.426276 &lt;span class="m"&gt;6&lt;/span&gt;.453445
O &lt;span class="m"&gt;4&lt;/span&gt;.893735 &lt;span class="m"&gt;13&lt;/span&gt;.419199 &lt;span class="m"&gt;9&lt;/span&gt;.302062
H &lt;span class="m"&gt;5&lt;/span&gt;.82317 &lt;span class="m"&gt;13&lt;/span&gt;.510635 &lt;span class="m"&gt;9&lt;/span&gt;.461939
O &lt;span class="m"&gt;2&lt;/span&gt;.621193 &lt;span class="m"&gt;13&lt;/span&gt;.123312 &lt;span class="m"&gt;7&lt;/span&gt;.624101
H &lt;span class="m"&gt;2&lt;/span&gt;.124667 &lt;span class="m"&gt;13&lt;/span&gt;.404712 &lt;span class="m"&gt;8&lt;/span&gt;.410292
O &lt;span class="m"&gt;3&lt;/span&gt;.723529 &lt;span class="m"&gt;10&lt;/span&gt;.689556 &lt;span class="m"&gt;8&lt;/span&gt;.948275
H &lt;span class="m"&gt;3&lt;/span&gt;.223616 &lt;span class="m"&gt;10&lt;/span&gt;.091097 &lt;span class="m"&gt;8&lt;/span&gt;.387248
                                 ! Empty line ... This empty line is needed                   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With this simple input file (let's save it and name it: "gaussian_test.com"), the only other thing we need to run our first Gaussian calculation on the &lt;strong&gt;Kamiak&lt;/strong&gt; cluster is a submission script to launch our calculation on &lt;strong&gt;Kamiak&lt;/strong&gt; nodes.&lt;/p&gt;
&lt;h2&gt;Submission Script for Gaussian on Kamiak&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="c1"&gt;#SBATCH --job-name=test       ###Job Name&lt;/span&gt;
&lt;span class="c1"&gt;#SBATCH --partition=kamiak    ###Partition on which to run&lt;/span&gt;
&lt;span class="c1"&gt;#SBATCH --nodes=1             ###Number of nodes to use&lt;/span&gt;
&lt;span class="c1"&gt;#SBATCH --ntasks-per-node=20   ###Number of tasks per node (aka MPI processes)&lt;/span&gt;
&lt;span class="c1"&gt;#SBATCH --cpus-per-task=1    ###Number of cpus per task (aka OpenMP threads)&lt;/span&gt;
&lt;span class="c1"&gt;#SBATCH --time=7-00:00:00&lt;/span&gt;
module load gaussian          &lt;span class="c1"&gt;###Load gaussian module on Kamiak&lt;/span&gt;

&lt;span class="nv"&gt;finit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;                      &lt;span class="c1"&gt;###The base name of your input file  &lt;/span&gt;
&lt;span class="nv"&gt;fend&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.com&amp;#39;&lt;/span&gt;                     
&lt;span class="nv"&gt;foutend&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.out&amp;#39;&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GAUSS_SCRDIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;mkworkspace -q&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;  &lt;span class="c1"&gt;###Creates a workspace&lt;/span&gt;

g09 &amp;lt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;finit&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;fend&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;finit&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;foutend&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;                                                        
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's save this piece of bash code and save it as: "sub_g09.slurm". Since our input file name is "gaussian_test.com" to run &lt;strong&gt;Gaussian&lt;/strong&gt; with this submission script we would type:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sbatch sub_g09.slurm gaussian_test     &lt;span class="c1"&gt;### &amp;quot;gaussian_test&amp;quot; is the base name of our input file  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Running this job should generate an output-file named "gaussian_test.out" that will contain all the info of this calculation.
Let's look at some of its elements before we explain one example with a bit more complicated workflow.&lt;/p&gt;
&lt;h2&gt;Output File&lt;/h2&gt;
&lt;p&gt;After the job has run to completion you can check the "gaussian_test.out" output-file located in the folder where you launched your calculation from. You can check the &lt;strong&gt;"Normal termination of Gaussian..."&lt;/strong&gt; sentence looking at the end of the output file.&lt;br&gt;
The HF Energy after several SCF cycles can normally be found by searching for &lt;strong&gt;"SCF Done:  E(RHF)"&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grep -H &lt;span class="s1"&gt;&amp;#39;SCF Done:  E(RHF)&amp;#39;&lt;/span&gt; gaussian_test.out
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are many other interesting properties you will find in the output file i.e Atomic Mulliken partial charges, info about dipole moments etc...&lt;/p&gt;
&lt;p&gt;For more info about &lt;strong&gt;input&lt;/strong&gt; options or general examples for each type of calculation you can check Gaussian's website directly &lt;a href="http://gaussian.com/keywords/"&gt;here&lt;/a&gt;:&lt;code&gt;http://gaussian.com/keywords/&lt;/code&gt;&lt;/p&gt;</content><category term="gaussian"></category><category term="kamiak"></category><category term="wsu"></category><category term="misc"></category></entry><entry><title>Setting up your Blog</title><link href="https://ernek.github.io/Blog%20set%20up.html" rel="alternate"></link><published>2019-06-02T18:00:00-07:00</published><updated>2019-06-02T18:02:00-07:00</updated><author><name>Ernek</name></author><id>tag:ernek.github.io,2019-06-02:/Blog set up.html</id><summary type="html">&lt;p&gt;Directions on how to create a Blog similar to this one.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Start and see&lt;/p&gt;</content><category term="second"></category><category term="misc"></category><category term="blog"></category></entry><entry><title>Hello World!</title><link href="https://ernek.github.io/hello-world.html" rel="alternate"></link><published>2018-11-29T11:05:00-08:00</published><updated>2018-11-29T11:10:00-08:00</updated><author><name>Ernek</name></author><id>tag:ernek.github.io,2018-11-29:/hello-world.html</id><summary type="html">&lt;p&gt;Test post of this website.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hello World! This is the &lt;em&gt;first post&lt;/em&gt; from my Pelican blog. &lt;strong&gt;YAY!&lt;/strong&gt;&lt;/p&gt;</content><category term="first"></category><category term="misc"></category></entry></feed>